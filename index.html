<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estado de Alerta</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
    
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
    <script>
      window.OneSignalDeferred = window.OneSignalDeferred || [];
      window.OneSignalDeferred.push(function(OneSignal) {
        OneSignal.init({
          appId: "023dcf63-6116-46d1-ad20-4eb1d83b3c52", // Your App ID
          safari_web_id: "",
          notifyButton: {
            enable: true,
          },
          allowLocalhostAsSecureOrigin: true,
          // This tells OneSignal to use YOUR worker, not the default one
          serviceWorkerPath: 'sw.js', 
          serviceWorkerParam: { scope: '/' } 
        });
      });
    </script>
    </head>
  <body>
    <div class="main-wrapper">
      <div class="logo-wrapper">
        <img src="images/antamina-logo.png" alt="Antamina Logo">
      </div>

      <div id="home-view">
        <div id="status-card" class="mini-container status-error">
          <h1>Estado de la alerta:</h1>
          <div id="status">Cargando...</div>
          <p id="last-updated"></p>
        </div>

        <div id="locations-container" class="mini-container" style="display: none;">
          <h2>Zonas Afectadas</h2>
          <ul id="locations-list"></ul>
        </div>
      
        <div id="details-container" class="mini-container" style="display: none;">
          <img id="detail-siren-img" src="" alt="Siren Icon">
          <h2 id="detail-alert-name" class="detail-h2"></h2> 
          <button id="detail-action-button" class="action-button"></button>
          <ul class="detail-list">
            <li id="protocol"></li>
            <li id="storm-radius"></li>
            <li id="details"></li>
          </ul>
          <button id="back-btn" class="return-button" style="margin-top: 15px;">
            Volver
          </button>
        </div>
      </div>

      <div id="info-view" class="mini-container" style="display: none;">

        <div class="info-block info-block-clickable">
          <img src="images/Red siren.png" alt="Siren Icon" class="info-siren">
          <h2 class="detail-h2 text-roja">Alerta Roja</h2> 
          <button class="action-button red">EVACUAR</button>
          <ul class="detail-list info-details">
            <li>Se emite cuando se detectan rayos dentro del área crítica, entre 0 y 8 km.</li>
            <li>Se suspenden inmediatamente todos los trabajos al aire libre y el personal debe dirigirse a los refugios identificados</li>
          </ul>
        </div>

        <div class="info-block info-block-clickable">
          <img src="images/Orange siren.png" alt="Siren Icon" class="info-siren">
          <h2 class="detail-h2 text-naranja">Alerta Naranja</h2> 
          <button class="action-button orange">SUSPENDER OPERACIONES</button>
          <ul class="detail-list info-details">
            <li>Indica caída de rayos en el rango de 8 a 16 km.</li>
            <li>Suspender trabajos a la intemperie cuyo acceso a los refugios contra tormentas se encuentren a más de 100 mts.</li>
          </ul>
        </div>

        <div class="info-block info-block-clickable">
          <img src="images/Yellow siren.png" alt="Siren Icon" class="info-siren">
          <h2 class="detail-h2 text-amarilla">Alerta Amarilla</h2> 
          <button class="action-button yellow">ATENTO A COMUNICACIONES</button>
          <ul class="detail-list info-details">
            <li>Se activa al detectar rayos entre 16 y 32 km de distancia.</li>
            <li>Supervisores y trabajadores deben mantener observación constante del cielo y estar atentos a las comunicaciones radiales.</li>
          </ul>
        </div>

        <div class="info-block info-block-clickable">
          <img src="images/Green siren.png" alt="Siren Icon" class="info-siren">
          <h2 class="detail-h2 text-green">Todo Despejado</h2> 
          <button class="action-button green">DESPEJADO</button>
          <ul class="detail-list info-details">
            <li>No se detectan rayos en un radio de 32 km.</li>
            <li>Proceder con las labores.</li>
          </ul>
        </div>

      </div>      
    
      <div class="nav-header">
        <button id="nav-inicio" class="nav-button active">Inicio</button>
        <button id="nav-info" class="nav-button">Información</button>
      </div>

    </div>
    
    <script src="app.js"></script>
  </body>
</html>